# AWGN伝送路シミュレータ

## 概要
このプロジェクトはAWGN（Additive White Gaussian Noise）伝送路でのBER（Bit Error Rate）のシミュレーション値と理論値を求めるためのコード．（フェージングも追加しました）</br>
QPSKと16QAMだけやってみたので，他の256QAMや研究で発明した新しい設計等では，それに合わせて書いてもらいたい．実験の進め方として，**理論計算（気合で手計算）→シミュレーション**で理論計算が合っているか確認という手順になる．（理論計算は先生に縋ってた）

## ファイル構成
- `random_collection.h`: 藤井先生が作ってくれた正規乱数用のヘッダーファイル（ありがたく使ったけど自作もできるかと）
- `Simulator.h`: シミュレータクラスの宣言を含むヘッダーファイル．線形代数のライブラリに[Eigen](https://eigen.tuxfamily.org/index.php?title=Main_Page)を使用している．標準ライブラリでもできるが，Eigenで線形代数の演算を書いた方が楽だと思う．
- `power_ber.cpp`: AWGN伝送路シミュレーションのメインプログラム

## 実行
power_ber.exeを起動すればターミナルが出てくるから必要な情報を入力して実行</br>
または，プロジェクトのディレクトリに移ってこれをターミナルで実行
わからなければ，[vscode](https://code.visualstudio.com/)などでC++の環境作る
```
$ if ($?) { g++ power_ber.cpp -o power_ber } ; if ($?) { .\power_ber }
```

## ファイルの説明
### Simulator.h
- **呼び出されたらメンバ変数それぞれを設定**
- **シンボルをQPSK**
    - ⚠️ この時，平均のビット当たりのエネルギー($E_b$)を1にしておく．このコードでは$P$で制御している．
- **雑音の標準偏差を設定**
これは大変気を付けるところ．1ビット当たりにかかる雑音のエネルギーを$N_0$とすると，$E_b/N_0$は$E_b$は1になるようにしているから，$N_0$はビットの数だけ割らないといけない．
- **シミュレーション**
- **理論値計算**<sup>[1][2][3]</sup>

### power_ber.cpp
csvファイル作って結果を書く．</br>
EbN0dBを増やしていって電力比ごとのBERを取る．正確にBERを取るときは誤り率$10^{-k}$くらいだと試行回数は$10^{k+2}$回にしないといけないらしい．</br>
試行回数増やしていくと終わるのに1日，2日くらいかかることもある．そのため，処理が重複しているコードはやめたい．（DRY原則）</br>

## 実行結果
[AWGNの結果](./figure/画像8.png)  
[選択性フェージングの結果](./figure/画像9.png)  
シミュレーションの試行回数は$10^{5}$回でやったから，プロットはちょっとぶれてるけど試行回数増やしたら理論値に沿うようになるはず．</br>
グラフは[ngraph](https://www2e.biglobe.ne.jp/~isizaka/)で描画している．グラフは何で書いてもいいが，ngraph使いたければ，去年の[安倍さんのMレク](https://drive.google.com/drive/u/0/folders/12RqtbDUnCFb7Q4qlp9Xucq_lk0aBjvIU)を参考に．

## おわりに
AWGNのシミュレーターを作った．わからないところがあれば上げてほしい．（フェージングも追加済）</br>  
今後の方針として，本コードをもとに，64QAMのシンボル設計を記述し，64QAMでのAWGNにおける誤り率の理論値を計算する．それから理論値，シミュレーション値でBER特性を求めて正しいかを確認する．終わればとりあえずAWGNは理解できたと思うから，フェージングについても同様にやってみる．これで勉強おしまいで各々研究に入れるかと思う．

## 参考文献
[1] J.G. Proakis, ディジタルコミュニケーション, 科学技術出版 , 1999.  
[2] 高畑文雄,  ディジタル無線通信入門, 培風館, 2002.  
[3] 先生が作った紙